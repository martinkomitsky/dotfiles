#!/usr/bin/env bash

if [ -d $HOME/.dotfiles ]; then
    cd $HOME/.dotfiles
    git pull origin master
else
    git clone https://github.com/eprev/dotfiles.git $HOME/.dotfiles
    grep -q "\.dotfiles/bashrc" $HOME/.bashrc || echo "source ~/.dotfiles/bashrc" >> $HOME/.bashrc
    grep -q "\.dotfiles/bash_profile" $HOME/.bash_profile || echo "source ~/.dotfiles/bash_profile" >> $HOME/.bash_profile
    cd $HOME/.dotfiles
fi

cd $HOME/.dotfiles
git submodule init
git submodule update

$HOME/.dotfiles/bin/dot-link-files
